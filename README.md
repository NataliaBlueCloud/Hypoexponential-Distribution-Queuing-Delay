
This repository contains R Markdown code for simulating and analyzing a system with hypoexponential distribution across three links, as well as functions for calculating delays for a any number of links. The simulation is conducted using the **_simmer_** package, and theoretical calculations are performed using **_igraph_** and **_EnvStats_**.

# Hypoexponential Distribution

In the context of multiple links with M/M/1 queuing model, the service time distribution is not necessarily exponential anymore. Instead, it follows a hypoexponential distribution, which is a mixture of exponential distributions. Which is relevant to this distribution is the convolution of exponential random variables. This involves summing exponential random variables with different means.

## Properties of Hypoexponential Distribution

- **Mean and Variance:** The mean and variance of a hypoexponential distribution can be calculated based on the parameters of the exponential components in the mixture.
- **PDF:** The PDF of a hypoexponential distribution is a weighted sum of the PDFs of its exponential components.

## Hypoexponential Random Variables
Let $\(X_i, i=1..n\)$ be exponential random variables with rates $\(r_i, i=1..n\)$ such that $\(r_i \neq r_j\)$ for $\(i \neq j\)$. Then, $$Y = \sum_{k=1}^n X_i  $$ is a hypoexponential random variable.

To calculate the rates for each link, use the formula:
$$r = \frac{1 - \rho}{E_x}$$ where $E_x = \frac{8 N}{C}$ is average service times and $\rho$ - load of this link.
# Example with 3 Links - Simulation and Analysis

#### PDF - Simple Case
Consider three exponential random variables $X_1$, $X_2$, and $X_3$ with rates $r_1\$, $r_2\$, and $r_3$ respectively. The density function is given by:
$$\ f(X_1 + X_2 + X_3 = t) = \frac{r_1 r_2}{(r_1 - r_3)(r_2 - r_3)} e^{-r_3 t} + \frac{r_1 r_3}{(r_1 - r_2)(r_3 - r_2)} e^{-r_2 t} + \frac{r_2 r_3}{(r_2 - r_1)(r_3 - r_1)} e^{-r_1 t} \$$


# n-Number of Links Functions and Generalization formula
For $(n)$ number of exponential random variables, the density function is:
$$\ f(X_1 + X_2 + ... + X_n = t) = \sum_{i=1}^{n} C_{i,n} r_i e^{-r_i t} \$$
where
$$\ C_{i,n} = \prod_{j \neq i} \frac{r_j}{r_j - r_i} \$$

## Probability Calculation
To calculate the probability of the sum of several exponential random variables with different rates being greater than some constant $\(t\)$, use:
$$\ P(Y > t) = \sum_{i=1}^{n} C_{i,n} e^{-r_i t} \$$


# Usage

### Input Data
Specify the system parameters such as capacity of the links in Gbps (**Capacity_Gbps**), load for each link, and the packet size (**N**).

### Igraph Theoretical Calculations
This section uses the igraph package to perform theoretical calculations and visualize the network graph.

### Simulation and Delay Comparison
The code calculates both theoretical and simulated delays for the three links to compare the results using library **simmer**.

## n-Number of Links and Calculation Example
This section contains functions for calculating the theoretical and simulated delays for a system with a variable number of links (**n**).

## Installation and Setup
Before running the code, ensure that you have the required R packages installed:

- **igraph**
- **simmer**
- **dplyr**

You can install these packages using the install.packages() function in R.
```R
install.packages(c("igraph", "simmer", "dplyr"))
```

# Results
The results of the simulation and analysis are presented in the code output and visualizations generated by the R code.

